{"version":3,"file":"index.js","sources":["../src/home.js"],"sourcesContent":["\r\nimport {\r\n  fetchCategories,\r\n  fetchProducts,\r\n  fetchProductsByCategory,\r\n  fetchProductsById,\r\n  searchProducts,\r\n  fetchTotalProductsCount\r\n} from \"./js/products-api.js\";\r\nimport {\r\n  renderCategories,\r\n  renderProducts,\r\n  renderProductInModal\r\n} from \"./js/render-functions.js\";\r\nimport { refs } from \"./js/refs.js\";\r\nimport {\r\n  addToWishlist,\r\n  removeFromWishlist,\r\n  isInWishlist,\r\n  getWishlist,\r\n  getCart,\r\n  addToCart,\r\n  removeFromCart,\r\n  isInCart\r\n} from './js/storage.js';\r\nimport {\r\n  resetPagination,\r\n  initPagination,\r\n  loadProductsByPage,\r\n  changeTheme\r\n} from \"./js/helpers.js\";\r\n\r\nlet currentPage = 1;\r\nconst limit = 12;\r\n\r\nconst updateNavCount = () => {\r\n  const wishlist = getWishlist();\r\n  if (refs.navCount) {\r\n    refs.navCount.textContent = wishlist.length;\r\n  }\r\n};\r\n\r\nconst updateNavCountCart = () => {\r\n  const cart = getCart();\r\n  const totalQuantity = cart.reduce((sum, item) => sum + item.quantity, 0);\r\n  if (refs.navCountCart) {\r\n    refs.navCountCart.textContent = totalQuantity;\r\n  }\r\n};\r\n\r\nconst updateWishlistButton = (productId) => {\r\n  if (refs.wishButton) {\r\n    refs.wishButton.textContent = isInWishlist(productId)\r\n      ? 'Remove from Wishlist'\r\n      : 'Add to Wishlist';\r\n  }\r\n};\r\n\r\nconst updateCartButton = (productId) => {\r\n  if (refs.cartButton) {\r\n    refs.cartButton.textContent = isInCart(productId)\r\n      ? 'Remove from Cart'\r\n      : 'Add to Cart';\r\n  }\r\n};\r\n\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\r\n  if (refs.loader) refs.loader.style.display = 'block';\r\n\r\n  try {\r\n\r\n    changeTheme();\r\n\r\n    const categories = await fetchCategories();\r\n    renderCategories(categories);\r\n\r\n\r\n    const products = await fetchProducts(currentPage, limit);\r\n    renderProducts(products);\r\n\r\n    updateNavCount();\r\n    updateNavCountCart();\r\n\r\n\r\n    const totalItems = await fetchTotalProductsCount();\r\n    initPagination(totalItems);\r\n\r\n  } catch (error) {\r\n    console.error('Error loading data:', error);\r\n  } finally {\r\n    if (refs.loader) refs.loader.style.display = 'none';\r\n  }\r\n});\r\n\r\n\r\nrefs.categoriesList?.addEventListener(\"click\", async (event) => {\r\n  const button = event.target.closest(\"button.categories__btn\");\r\n  if (!button) return;\r\n\r\n  if (refs.loader) refs.loader.style.display = 'block';\r\n\r\n  const category = button.textContent.trim();\r\n  resetPagination(category);\r\n\r\n\r\n  refs.categoryButtons().forEach(btn => btn.classList.remove(\"categories__btn--active\"));\r\n  button.classList.add(\"categories__btn--active\");\r\n\r\n  if (refs.searchInput) refs.searchInput.value = '';\r\n  if (refs.clearSearchBtn) refs.clearSearchBtn.classList.add('hidden');\r\n  if (refs.notFoundDiv) refs.notFoundDiv.classList.remove('not-found--visible');\r\n\r\n  try {\r\n    let products;\r\n    if (category === \"All\") {\r\n      products = await fetchProducts(1, limit);\r\n    } else {\r\n      products = await fetchProductsByCategory(category, 1, limit);\r\n    }\r\n\r\n    if (products.length === 0) {\r\n      if (refs.notFoundDiv) refs.notFoundDiv.classList.add('not-found--visible');\r\n      refs.productsList.innerHTML = '';\r\n      if (refs.paginationContainer) refs.paginationContainer.style.display = 'none';\r\n    } else {\r\n      if (refs.notFoundDiv) refs.notFoundDiv.classList.remove('not-found--visible');\r\n      renderProducts(products);\r\n      if (refs.paginationContainer) refs.paginationContainer.style.display = 'flex';\r\n    }\r\n  } catch (error) {\r\n    console.error('Error loading category:', error);\r\n  } finally {\r\n    if (refs.loader) refs.loader.style.display = 'none';\r\n  }\r\n});\r\n\r\n\r\nrefs.productsList?.addEventListener(\"click\", async (event) => {\r\n  const target = event.target;\r\n  const productItem = target.closest(\"li.products__item\");\r\n  if (!productItem) return;\r\n\r\n  const productId = Number(productItem.dataset.id);\r\n  if (!productId) return;\r\n\r\n  if (refs.loader) refs.loader.style.display = 'block';\r\n\r\n  try {\r\n    const product = await fetchProductsById(productId);\r\n    renderProductInModal(product);\r\n    if (refs.modal) refs.modal.classList.add(\"modal--is-open\");\r\n\r\n    updateWishlistButton(productId);\r\n    updateCartButton(productId);\r\n\r\n\r\n    if (refs.wishButton) {\r\n      refs.wishButton.onclick = () => {\r\n        isInWishlist(productId)\r\n          ? removeFromWishlist(productId)\r\n          : addToWishlist(productId);\r\n        updateWishlistButton(productId);\r\n        updateNavCount();\r\n      };\r\n    }\r\n\r\n\r\n    if (refs.cartButton) {\r\n      refs.cartButton.onclick = () => {\r\n        isInCart(productId)\r\n          ? removeFromCart(productId)\r\n          : addToCart(productId);\r\n        updateCartButton(productId);\r\n        updateNavCountCart();\r\n      };\r\n    }\r\n  } catch (error) {\r\n    console.error('Error loading product:', error);\r\n  } finally {\r\n    if (refs.loader) refs.loader.style.display = 'none';\r\n  }\r\n});\r\n\r\nrefs.modal?.addEventListener(\"click\", (event) => {\r\n  if (event.target === refs.modal || event.target.classList.contains(\"modal__close-btn\")) {\r\n    refs.modal.classList.remove(\"modal--is-open\");\r\n  }\r\n});\r\n\r\n\r\nrefs.searchForm?.addEventListener(\"submit\", async (event) => {\r\n  event.preventDefault();\r\n\r\n  const query = refs.searchInput?.value.trim();\r\n  if (!query) return;\r\n\r\n  if (refs.loader) refs.loader.style.display = 'block';\r\n\r\n  try {\r\n    const products = await searchProducts(query, currentPage, limit);\r\n\r\n    if (products.length === 0) {\r\n      if (refs.notFoundDiv) refs.notFoundDiv.classList.add('not-found--visible');\r\n      refs.productsList.innerHTML = '';\r\n      if (refs.loadButton) refs.loadButton.style.display = 'none';\r\n    } else {\r\n      if (refs.notFoundDiv) refs.notFoundDiv.classList.remove('not-found--visible');\r\n      renderProducts(products);\r\n    }\r\n  } catch (error) {\r\n    console.error('Error searching products:', error);\r\n    if (refs.notFoundDiv) refs.notFoundDiv.classList.add('not-found--visible');\r\n    refs.productsList.innerHTML = '';\r\n  } finally {\r\n    if (refs.loader) refs.loader.style.display = 'none';\r\n  }\r\n});\r\n\r\n\r\nrefs.searchInput?.addEventListener('input', () => {\r\n  if (refs.clearSearchBtn) {\r\n    refs.clearSearchBtn.classList.toggle('hidden', refs.searchInput.value.trim() === '');\r\n  }\r\n});\r\n\r\n\r\nrefs.clearSearchBtn?.addEventListener(\"click\", async () => {\r\n  if (refs.searchInput) refs.searchInput.value = '';\r\n  if (refs.clearSearchBtn) refs.clearSearchBtn.classList.add('hidden');\r\n  if (refs.notFoundDiv) refs.notFoundDiv.classList.remove('not-found--visible');\r\n  if (refs.loader) refs.loader.style.display = 'block';\r\n\r\n  try {\r\n    const products = await fetchProducts(1, limit);\r\n    renderProducts(products);\r\n    if (refs.loadButton) refs.loadButton.style.display = 'block';\r\n  } catch (error) {\r\n    console.error('Error loading all products:', error);\r\n    refs.productsList.innerHTML = '';\r\n    if (refs.notFoundDiv) refs.notFoundDiv.classList.add('not-found--visible');\r\n  } finally {\r\n    if (refs.loader) refs.loader.style.display = 'none';\r\n  }\r\n});\r\n\r\n\r\nconst scrollUpButton = document.querySelector('.scroll-up');\r\nif (scrollUpButton) {\r\n  window.addEventListener('scroll', () => {\r\n    if (window.scrollY > 250) {\r\n      scrollUpButton.classList.remove('hidden');\r\n    } else {\r\n      scrollUpButton.classList.add('hidden');\r\n    }\r\n  });\r\n\r\n  scrollUpButton.addEventListener('click', () => {\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n  });\r\n}\r\n"],"names":["currentPage","limit","updateNavCount","wishlist","getWishlist","refs","updateNavCountCart","totalQuantity","getCart","sum","item","updateWishlistButton","productId","isInWishlist","updateCartButton","isInCart","changeTheme","categories","fetchCategories","renderCategories","products","fetchProducts","renderProducts","totalItems","fetchTotalProductsCount","initPagination","error","_a","event","button","category","resetPagination","btn","fetchProductsByCategory","productItem","product","fetchProductsById","renderProductInModal","removeFromWishlist","addToWishlist","removeFromCart","addToCart","query","searchProducts","scrollUpButton"],"mappings":"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"}